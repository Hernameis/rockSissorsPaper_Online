package com.mukzzibba.server;

import java.io.BufferedWriter;
import java.io.IOException;
import java.net.Socket;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Iterator;
import java.util.LinkedList;
import java.util.List;
import java.util.Queue;

public class ChatManager extends Thread{
	
	private static HashMap<String, Socket> userSockets;
	private static HashSet<String> onlineUsers;
	Iterator<String> ite;
	
	private static Queue<String> strTosay;
	private Socket sock;
	String strToWrite;
	String name;
	
	BufferedWriter bw;
	
	@Override
	public void run() {
		strTosay=new LinkedList<String>();
		while(true) {
			if(!strTosay.isEmpty()){
				strToWrite=strTosay.poll();
				ite=onlineUsers.iterator();
				while(ite.hasNext()){
					name=ite.next();
					sock=userSockets.get(name);
					bw=openWriteStream(sock);
					useBufferedStream(bw, strToWrite);
				}
			}
		}
	}
	
	private static BufferedWriter openWriteStream(Socket sock){
		return null;
	}
	
	private static void useBufferedStream(BufferedWriter bw, String msg){
		try {
			bw.write(msg);
		} catch (IOException e) {
			e.printStackTrace();
		}
	}
}
